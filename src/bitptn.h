#pragma once
#include "util.h"

namespace bitptn{
constexpr u64 h[8]={0xff,0xff00,0xff0000,0xff000000,0xff00000000,0xff0000000000,0xff000000000000,0xff00000000000000};\
constexpr u64 v[8]={0x101010101010101,0x202020202020202,0x404040404040404,0x808080808080808,0x1010101010101010,0x20202020202\
02020,0x4040404040404040,0x8080808080808080};\
constexpr u64 d1[15]={0x100000000000000,0x201000000000000,0x402010000000000,0x804020100000000,0x1008040201000000,0x201008040\
2010000,0x4020100804020100,0x8040201008040201,0x80402010080402,0x804020100804,0x8040201008,0x80402010,0x804020,0x8040,0x\
80};\
constexpr u64 d2[15]={0x1,0x102,0x10204,0x1020408,0x102040810,0x10204081020,0x1020408102040,0x102040810204080,0x204081020408\
000,0x408102040800000,0x810204080000000,0x1020408000000000,0x2040800000000000,0x4080000000000000,0x8000000000000000};\
constexpr u64 pl_h[64]={0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7,0,1,\
2,3,4,5,6,7,0,1,2,3,4,5,6,7};\
constexpr u64 pl_v[64]={0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,\
6,6,6,6,6,6,7,7,7,7,7,7,7,7};\
constexpr u64 pl_d1[64]={0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,2,2,2,2,2,2,0,1,2,3,3,3,3,3,0,1,2,3,4,4,4,4,0,1,2,3,4,5,5,5,0,1\
,2,3,4,5,6,6,0,1,2,3,4,5,6,7};\
constexpr u64 pl_d2[64]={0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,2,2,2,2,2,2,1,0,3,3,3,3,3,2,1,0,4,4,4,4,3,2,1,0,5,5,5,4,3,2,1,0,6,6\
,5,4,3,2,1,0,7,6,5,4,3,2,1,0};\
constexpr u64 pm_h[64]={0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff00,0xff00,0xff00,0xff00,0xff00,0xff00,0xff00,0xff00,0xff\
0000,0xff0000,0xff0000,0xff0000,0xff0000,0xff0000,0xff0000,0xff0000,0xff000000,0xff000000,0xff000000,0xff000000,0xff0000\
00,0xff000000,0xff000000,0xff000000,0xff00000000,0xff00000000,0xff00000000,0xff00000000,0xff00000000,0xff00000000,0xff00\
000000,0xff00000000,0xff0000000000,0xff0000000000,0xff0000000000,0xff0000000000,0xff0000000000,0xff0000000000,0xff000000\
0000,0xff0000000000,0xff000000000000,0xff000000000000,0xff000000000000,0xff000000000000,0xff000000000000,0xff00000000000\
0,0xff000000000000,0xff000000000000,0xff00000000000000,0xff00000000000000,0xff00000000000000,0xff00000000000000,0xff0000\
0000000000,0xff00000000000000,0xff00000000000000,0xff00000000000000};\
constexpr u64 pm_v[64]={0x101010101010101,0x202020202020202,0x404040404040404,0x808080808080808,0x1010101010101010,0x2020202\
020202020,0x4040404040404040,0x8080808080808080,0x101010101010101,0x202020202020202,0x404040404040404,0x808080808080808,\
0x1010101010101010,0x2020202020202020,0x4040404040404040,0x8080808080808080,0x101010101010101,0x202020202020202,0x404040\
404040404,0x808080808080808,0x1010101010101010,0x2020202020202020,0x4040404040404040,0x8080808080808080,0x10101010101010\
1,0x202020202020202,0x404040404040404,0x808080808080808,0x1010101010101010,0x2020202020202020,0x4040404040404040,0x80808\
08080808080,0x101010101010101,0x202020202020202,0x404040404040404,0x808080808080808,0x1010101010101010,0x202020202020202\
0,0x4040404040404040,0x8080808080808080,0x101010101010101,0x202020202020202,0x404040404040404,0x808080808080808,0x101010\
1010101010,0x2020202020202020,0x4040404040404040,0x8080808080808080,0x101010101010101,0x202020202020202,0x40404040404040\
4,0x808080808080808,0x1010101010101010,0x2020202020202020,0x4040404040404040,0x8080808080808080,0x101010101010101,0x2020\
20202020202,0x404040404040404,0x808080808080808,0x1010101010101010,0x2020202020202020,0x4040404040404040,0x8080808080808\
080};\
constexpr u64 pm_d1[64]={0x8040201008040201,0x80402010080402,0x804020100804,0x8040201008,0x80402010,0x804020,0x8040,0x80,0x4\
020100804020100,0x8040201008040201,0x80402010080402,0x804020100804,0x8040201008,0x80402010,0x804020,0x8040,0x20100804020\
10000,0x4020100804020100,0x8040201008040201,0x80402010080402,0x804020100804,0x8040201008,0x80402010,0x804020,0x100804020\
1000000,0x2010080402010000,0x4020100804020100,0x8040201008040201,0x80402010080402,0x804020100804,0x8040201008,0x80402010\
,0x804020100000000,0x1008040201000000,0x2010080402010000,0x4020100804020100,0x8040201008040201,0x80402010080402,0x804020\
100804,0x8040201008,0x402010000000000,0x804020100000000,0x1008040201000000,0x2010080402010000,0x4020100804020100,0x80402\
01008040201,0x80402010080402,0x804020100804,0x201000000000000,0x402010000000000,0x804020100000000,0x1008040201000000,0x2\
010080402010000,0x4020100804020100,0x8040201008040201,0x80402010080402,0x100000000000000,0x201000000000000,0x40201000000\
0000,0x804020100000000,0x1008040201000000,0x2010080402010000,0x4020100804020100,0x8040201008040201};\
constexpr u64 pm_d2[64]={0x1,0x102,0x10204,0x1020408,0x102040810,0x10204081020,0x1020408102040,0x102040810204080,0x102,0x102\
04,0x1020408,0x102040810,0x10204081020,0x1020408102040,0x102040810204080,0x204081020408000,0x10204,0x1020408,0x102040810\
,0x10204081020,0x1020408102040,0x102040810204080,0x204081020408000,0x408102040800000,0x1020408,0x102040810,0x10204081020\
,0x1020408102040,0x102040810204080,0x204081020408000,0x408102040800000,0x810204080000000,0x102040810,0x10204081020,0x102\
0408102040,0x102040810204080,0x204081020408000,0x408102040800000,0x810204080000000,0x1020408000000000,0x10204081020,0x10\
20408102040,0x102040810204080,0x204081020408000,0x408102040800000,0x810204080000000,0x1020408000000000,0x204080000000000\
0,0x1020408102040,0x102040810204080,0x204081020408000,0x408102040800000,0x810204080000000,0x1020408000000000,0x204080000\
0000000,0x4080000000000000,0x102040810204080,0x204081020408000,0x408102040800000,0x810204080000000,0x1020408000000000,0x\
2040800000000000,0x4080000000000000,0x8000000000000000};\
constexpr u64 p_umask[64]={0x7ebedeeef6fafc00,0xfd7dbdddedf5f800,0xfbfb7bbbdbeaf100,0xf7f7f777b6d5e300,0xefefefee6dabc700,0x\
dfdfdedddb578f00,0xbfbebdbbb7af1f00,0x7e7d7b776f5f3f00,0xbedeeef6fafc00fc,0x7dbdddedf5f800f8,0xfb7bbbdbeaf100f1,0xf7f777\
b6d5e300e3,0xefefee6dabc700c7,0xdfdedddb578f008f,0xbebdbbb7af1f001f,0x7d7b776f5f3f003f,0xdeeef6fafc00fcfa,0xbdddedf5f800\
f8f5,0x7bbbdbeaf100f1ea,0xf777b6d5e300e3d5,0xefee6dabc700c7ab,0xdedddb578f008f57,0xbdbbb7af1f001faf,0x7b776f5f3f003f5f,0\
xeef6fafc00fcfaf6,0xddedf5f800f8f5ed,0xbbdbeaf100f1eadb,0x77b6d5e300e3d5b6,0xee6dabc700c7ab6d,0xdddb578f008f57db,0xbbb7a\
f1f001fafb7,0x776f5f3f003f5f6f,0xf6fafc00fcfaf6ee,0xedf5f800f8f5eddd,0xdbeaf100f1eadbbb,0xb6d5e300e3d5b677,0x6dabc700c7a\
b6dee,0xdb578f008f57dbdd,0xb7af1f001fafb7bb,0x6f5f3f003f5f6f77,0xfafc00fcfaf6eede,0xf5f800f8f5edddbd,0xeaf100f1eadbbb7b,\
0xd5e300e3d5b677f7,0xabc700c7ab6deeef,0x578f008f57dbddde,0xaf1f001fafb7bbbd,0x5f3f003f5f6f777b,0xfc00fcfaf6eedebe,0xf800\
f8f5edddbd7d,0xf100f1eadbbb7bfb,0xe300e3d5b677f7f7,0xc700c7ab6deeefef,0x8f008f57dbdddedf,0x1f001fafb7bbbdbe,0x3f003f5f6f\
777b7d,0xfcfaf6eedebe7e,0xf8f5edddbd7dfd,0xf1eadbbb7bfbfb,0xe3d5b677f7f7f7,0xc7ab6deeefefef,0x8f57dbdddedfdf,0x1fafb7bbb\
dbebf,0x3f5f6f777b7d7e};

    extern u8 ptn_flip[8][256][256][2];
    extern bool ptn_canflip[8][256][256];

    void initPtnFlip();
}